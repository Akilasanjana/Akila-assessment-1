<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>CVE Detail</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link rel="stylesheet" href="/css/styles.css" />
</head>
<body>
  <main class="container">
    <a href="/cves/list">‚Üê Back to list</a>
    <h1 id="cveId">CVE Detail</h1>
    <pre id="rawJson" style="white-space:pre-wrap; max-height:60vh; overflow:auto;"></pre>
  </main>

  <script>
    // Extract ID from path
    const pathParts = location.pathname.split('/');
    const id = pathParts[pathParts.length - 1];
    document.getElementById('cveId').innerText = id;

    fetch(`/api/cves/${encodeURIComponent(id)}`)
      .then(r => {
        if (!r.ok) throw new Error('Failed to load CVE');
        return r.json();
      })
      .then(data => {
        document.getElementById('rawJson').textContent = JSON.stringify(data, null, 2);
      })
      .catch(err => {
        document.getElementById('rawJson').textContent = String(err);
      });
  </script>
</body>
</html>